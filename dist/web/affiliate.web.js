(()=>{"use strict";var t={735:function(t,e,r){function o(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var f=r(440),s=u(r(223)),c=r(7),l=function(){function t(e){var r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={attached:!1,config:{tags:[]},hosts:[]},this.observer=void 0,this.modifyURL=function(t,e,r){var o,i,u=(0,c.getNodeData)(e);if(!u.is||u.is!==t.href){var f=t.href;if(n.log(!1,"Discovered URL: "+t.href),r.query&&Object.keys(null!==(o=r.query)&&void 0!==o?o:{}).forEach((function(e){"object"===a(r.query)&&t.searchParams.set(e,r.query[e])})),"function"==typeof r.modify)try{var l=r.modify(t);"object"===a(l)&&(l=l.href),t=new URL(l,null===window||void 0===window?void 0:window.location.origin)}catch(t){(0,s.default)(!0,t)}var y=t.href;null===(i=r.replace)||void 0===i||i.forEach((function(t){y=y.replace(t.from,t.to)})),e.href=y,(0,c.setNodeData)(e,{was:f,is:t.href})}},this.attach=function(){if(n.state.attached||"undefined"==typeof document)return n;var t=document.readyState;return"complete"===t||"interactive"===t?(n.state.attached=!0,n.traverse(),f.hasMutationObserver&&n.observer?n.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeFilter:["href"]}):n.log(!1,"Browser does not support MutationObserver.")):window.addEventListener("DOMContentLoaded",n.attach),n},this.detach=function(){return f.hasMutationObserver&&n.observer?(n.state.attached=!1,n.observer.disconnect(),n.log(!1,"Observer disconnected."),n):n},(e=null!=e?e:{}).tags=null!==(r=e.tags)&&void 0!==r?r:[],e.tags.map((function(t,r){e&&e.tags&&("string"==typeof t.hosts&&(t.hosts=[t.hosts]),e.tags[r]=Object.assign({query:{},replace:[]},t),n.state.hosts=[].concat(o(n.state.hosts),o(e.tags[r].hosts)))})),this.log=e.log?s.default:function(){},this.log(!1,"New Instance",e),f.hasMutationObserver&&(this.observer=new window.MutationObserver((function(t){var e=!1;t.forEach((function(t){if("attributes"===t.type){if("href"!==t.attributeName)return;var r=t.target.href,o=(0,c.getNodeData)(t.target);if(o.is&&o.is===r)return}e||(n.log(!1,"DOM Mutation",t),e=!0),n.traverse(t.target)}))}))),this.state.config=e}var e,r;return e=t,r=[{key:"traverse",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if("object"!==a(e)||"function"!=typeof e.getElementsByTagName)return this;if(!f.hasURL)return this.log(!0,"This browser needs a URL polyfill."),this;this.log(!1,"Traversing DOM...");var r=e.getElementsByTagName("a"),o=Object.values(r);return"a"===e.nodeName.toLowerCase()&&(o=[e]),this.log(!1,"Found ".concat(o.length+1," nodes...")),o.forEach((function(e){var r;if(e&&"href"in e){var o=new URL(null!==(r=e.href)&&void 0!==r?r:"",null===window||void 0===window?void 0:window.location.origin);-1!==t.state.hosts.indexOf(o.host)&&t.state.config.tags.forEach((function(r){-1!==r.hosts.indexOf(o.host)&&t.modifyURL(o,e,r)}))}})),this}}],r&&i(e.prototype,r),t}();e.default=l},309:function(t,e,r){function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=i(r(406)),f=i(r(735)),s=i(r(223)),c=r(7),l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={instances:[]},this.create=function(t){var r=new f.default(t);return e.state.instances.push(r),r},this.detachAll=function(){e.state.instances.forEach((function(t){return t.detach()}))},this.revert=function(){e.detachAll(),Object.values(document.body.getElementsByTagName("a")).forEach((function(t){var e=(0,c.getNodeData)(t);e&&"string"==typeof e.was&&(t.href=e.was,(0,c.setNodeData)(t,{}))}))};try{var r=(0,u.default)();if("object"===n(r)){var o=this.create(r);(0,s.default)(!1,o),this.state.auto=o,o.attach()}}catch(t){(0,s.default)(!0,t)}}var e,r;return e=t,(r=[{key:"instances",get:function(){return function(t){if(Array.isArray(t))return o(t)}(t=this.state.instances)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t}}])&&a(e.prototype,r),t}();e.default=new l},406:(t,e)=>{function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}Object.defineProperty(e,"__esModule",{value:!0});var n=/WHERE (.+?) SET (.+?)\s*(?:AND|$)/g;e.default=function(){var t,e=document.getElementById("aff-js");if("object"===o(e)&&e){var a=null===(t=null==e?void 0:e.dataset)||void 0===t?void 0:t.autoAffiliate;if("string"==typeof a){var i=[],u=a.match(n);if(!u)return;return Object.values(u).forEach((function(t){var e=n.exec(t);if(e&&3===e.length){var o=e[1],a=e[2];i.push({hosts:o.split(",").map((function(t){return t.trim()})),query:a.split(",").reduce((function(t,e){var o,n,a=(o=e.split("="),n=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,n,a=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(o=r.next()).done)&&(a.push(o.value),!e||a.length!==e);i=!0);}catch(t){u=!0,n=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw n}}return a}}(o,n)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}}(o,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],u=a[1];return i&&u&&(t[i.trim()]=u.trim()),t}),{})})}})),{tags:i}}}}},440:(t,e)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.hasURL=e.hasMutationObserver=void 0,e.hasMutationObserver="object"===("undefined"==typeof window?"undefined":r(window))&&!(void 0===window.MutationObserver),e.hasURL="function"==typeof URL&&"function"==typeof URLSearchParams},223:(t,e)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e="[Affiliate] ";if("object"===("undefined"==typeof console?"undefined":r(console))){for(var o=arguments.length,n=new Array(o>1?o-1:0),a=1;a<o;a++)n[a-1]=arguments[a];var i,u;t?(i=console).error.apply(i,[e].concat(n)):(u=console).log.apply(u,[e].concat(n))}}},7:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setNodeData=e.getNodeData=void 0;e.getNodeData=function(t){var e;return null!==(e=t._aff)&&void 0!==e?e:{}},e.setNodeData=function(t,e){var r,o,n;Object.assign(t,(n=e,(o="_aff")in(r={})?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r._aff=n,r))}}},e={},r=function r(o){var n=e[o];if(void 0!==n)return n.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,r),a.exports}(309);window.Affiliate=r.default})();
//# sourceMappingURL=affiliate.web.js.map