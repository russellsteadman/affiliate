(()=>{"use strict";var t={735:function(t,e,r){function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var f=r(440),s=u(r(223)),c=r(7),l=function(){function t(e){var r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={attached:!1,config:{tags:[]},hosts:[]},this.observer=void 0,this.modifyURL=function(t,e,r){var n,i,u=(0,c.getNodeData)(e);if(!u.is||u.is!==t.href){var f=t.href;if(o.log(!1,"Discovered URL: "+t.href),r.query&&Object.keys(null!==(n=r.query)&&void 0!==n?n:{}).forEach((function(e){"object"===a(r.query)&&t.searchParams.set(e,r.query[e])})),"function"==typeof r.modify)try{var l=r.modify(t);"object"===a(l)&&(l=l.href),t=new URL(l,null===window||void 0===window?void 0:window.location.origin)}catch(t){(0,s.default)(!0,t)}var y=t.href;null===(i=r.replace)||void 0===i||i.forEach((function(t){y=y.replace(t.from,t.to)})),e.href=y,(0,c.setNodeData)(e,{was:f,is:t.href})}},this.attach=function(){if(o.state.attached||"undefined"==typeof document)return o;var t=document.readyState;return"complete"===t||"interactive"===t?(o.state.attached=!0,o.traverse(),f.hasMutationObserver&&o.observer?o.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeFilter:["href"]}):o.log(!1,"Browser does not support MutationObserver.")):window.addEventListener("DOMContentLoaded",o.attach),o},this.detach=function(){return f.hasMutationObserver&&o.observer?(o.state.attached=!1,o.observer.disconnect(),o.log(!1,"Observer disconnected."),o):o},(e=null!=e?e:{}).tags=null!==(r=e.tags)&&void 0!==r?r:[],e.tags.map((function(t,r){e&&e.tags&&("string"==typeof t.hosts&&(t.hosts=[t.hosts]),e.tags[r]=Object.assign({query:{},replace:[]},t),o.state.hosts=[].concat(n(o.state.hosts),n(e.tags[r].hosts)))})),this.log=e.log?s.default:function(){},this.log(!1,"New Instance",e),f.hasMutationObserver&&(this.observer=new window.MutationObserver((function(t){var e=!1;t.forEach((function(t){if("attributes"===t.type){if("href"!==t.attributeName)return;var r=t.target.href,n=(0,c.getNodeData)(t.target);if(n.is&&n.is===r)return}e||(o.log(!1,"DOM Mutation",t),e=!0),o.traverse(t.target)}))}))),this.state.config=e}var e,r,o;return e=t,r=[{key:"traverse",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if("object"!==a(e)||"function"!=typeof e.getElementsByTagName)return this;if(!f.hasURL)return this.log(!0,"This browser needs a URL polyfill."),this;this.log(!1,"Traversing DOM...");var r=e.getElementsByTagName("a"),n=Object.values(r);return"a"===e.nodeName.toLowerCase()&&(n=[e]),this.log(!1,"Found ".concat(n.length+1," nodes...")),n.forEach((function(e){var r;if(e&&"href"in e){var n=new URL(null!==(r=e.href)&&void 0!==r?r:"",null===window||void 0===window?void 0:window.location.origin);-1!==t.state.hosts.indexOf(n.host)&&t.state.config.tags.forEach((function(r){-1!==r.hosts.indexOf(n.host)&&t.modifyURL(n,e,r)}))}})),this}}],r&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.default=l},309:function(t,e,r){function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var f=u(r(406)),s=u(r(735)),c=u(r(223)),l=r(7),y=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={instances:[]},this.create=function(t){var r=new s.default(t);return e.state.instances.push(r),r},this.detachAll=function(){e.state.instances.forEach((function(t){return t.detach()}))},this.revert=function(){e.detachAll(),Object.values(document.body.getElementsByTagName("a")).forEach((function(t){var e=(0,l.getNodeData)(t);e&&"string"==typeof e.was&&(t.href=e.was,(0,l.setNodeData)(t,{}))}))};try{var r=(0,f.default)();if("object"===a(r)){var n=this.create(r);(0,c.default)(!1,n),this.state.auto=n,n.attach()}}catch(t){(0,c.default)(!0,t)}}var e,r,o;return e=t,(r=[{key:"instances",get:function(){return n(this.state.instances)}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.default=new y},406:(t,e)=>{function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){u=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=/WHERE (.+?) SET (.+?)\s*(?:AND|$)/g;e.default=function(){var t,e=document.getElementById("aff-js");if("object"===o(e)&&e){var n=null===(t=null==e?void 0:e.dataset)||void 0===t?void 0:t.autoAffiliate;if("string"==typeof n){var i=[],u=n.match(a);if(!u)return;return Object.values(u).forEach((function(t){var e=a.exec(t);if(e&&3===e.length){var n=e[1],o=e[2];i.push({hosts:n.split(",").map((function(t){return t.trim()})),query:o.split(",").reduce((function(t,e){var n=r(e.split("="),2),o=n[0],a=n[1];return o&&a&&(t[o.trim()]=a.trim()),t}),{})})}})),{tags:i}}}}},440:(t,e)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.hasURL=e.hasMutationObserver=void 0,e.hasMutationObserver="object"===("undefined"==typeof window?"undefined":r(window))&&!(void 0===window.MutationObserver),e.hasURL="function"==typeof URL&&"function"==typeof URLSearchParams},223:(t,e)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e="[Affiliate] ";if("object"===("undefined"==typeof console?"undefined":r(console))){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var i,u;if(t)(i=console).error.apply(i,[e].concat(o));else(u=console).log.apply(u,[e].concat(o))}}},7:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setNodeData=e.getNodeData=void 0;var r="_aff";e.getNodeData=function(t){var e;return null!==(e=t._aff)&&void 0!==e?e:{}};e.setNodeData=function(t,e){var n,o,a;Object.assign(t,(a=e,(o=r)in(n={})?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n))}}},e={};var r=function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}(309);window.Affiliate=r.default})();
//# sourceMappingURL=affiliate.web.js.map