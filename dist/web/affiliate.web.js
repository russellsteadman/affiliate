(()=>{"use strict";var t={735:function(t,e,o){function r(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=i(o(899)),c=i(o(223)),f=o(7),l="object"===("undefined"==typeof window?"undefined":s(window))&&!(void 0===window.MutationObserver),p=function(){function t(e){var o,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={attached:!1,config:{tags:[]},hosts:[]},this.observer=void 0,this.modifyURL=function(t,e,o){var r,a=(0,f.getNodeData)(e);if(!a.is||a.is!==t.href){var i=t.href;if(n.log(!1,"Discovered URL: "+t.href),t.set("query",Object.assign(Object.assign({},t.query),o.query)),"function"==typeof o.modify)try{var l=o.modify(t);"object"===s(l)&&(l=l.href),t=(0,u.default)(l,!0)}catch(t){(0,c.default)(!0,t)}var p=t.href;null===(r=o.replace)||void 0===r||r.forEach((function(t){p=p.replace(t.from,t.to)})),e.href=p,(0,f.setNodeData)(e,{was:i,is:t})}},this.attach=function(){if(!n.state.attached&&"undefined"!=typeof document){var t=document.readyState;if("complete"!==t&&"interactive"!==t)return window.addEventListener("DOMContentLoaded",n.attach);n.state.attached=!0,n.traverse(),l&&n.observer?n.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeFilter:["href"]}):n.log(!1,"Browser does not support MutationObserver.")}},this.detach=function(){l&&n.observer&&(n.state.attached=!1,n.observer.disconnect(),n.log(!1,"Observer disconnected."))},(e=null!=e?e:{}).tags=null!==(o=e.tags)&&void 0!==o?o:[],e.tags.map((function(t,o){e&&e.tags&&("string"==typeof t.hosts&&(t.hosts=[t.hosts]),e.tags[o]=Object.assign({query:{},replace:[]},t),n.state.hosts=[].concat(r(n.state.hosts),r(e.tags[o].hosts)))})),this.log=e.log?c.default:function(){},this.log(!1,"New Instance",e),l&&(this.observer=new window.MutationObserver((function(t){var e=!1;for(var o in t){if("attributes"===t[o].type){if("href"!==t[o].attributeName)continue;var r=t[o].target.href,a=(0,f.getNodeData)(t[o].target);if(a.is&&a.is===r)continue}e||(n.log(!1,"DOM Mutation",t[o]),e=!0),n.traverse(t[o].target)}}))),this.state.config=e}var e,o;return e=t,o=[{key:"traverse",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if("object"===s(e)&&"function"==typeof e.getElementsByTagName){this.log(!1,"Traversing DOM...");var o=e.getElementsByTagName("a"),r=Object.values(o);"a"===e.nodeName.toLowerCase()&&(r=[e]),this.log(!1,"Found ".concat(r.length+1," nodes...")),r.forEach((function(e){var o;if(e&&"href"in e){var r=(0,u.default)(null!==(o=e.href)&&void 0!==o?o:"",!0);-1!==t.state.hosts.indexOf(r.host)&&t.state.config.tags.forEach((function(o){-1!==o.hosts.indexOf(r.host)&&t.modifyURL(r,e,o)}))}}))}}}],o&&a(e.prototype,o),t}();e.default=p},309:function(t,e,o){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=s(o(406)),u=s(o(735)),c=s(o(223)),f=o(7),l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state={instances:[]},this.create=function(t){var o=new u.default(t);return e.state.instances.push(o),o},this.detachAll=function(){for(var t in e.state.instances)e.state.instances[t].detach()},this.revert=function(){e.detachAll();var t=[].slice.call(document.body.getElementsByTagName("a"));for(var o in t){var r=(0,f.getNodeData)(t[o]);r&&r.was&&(t[o].href=r.was,(0,f.setNodeData)(t[o],{}))}};try{var o=(0,i.default)();if("object"===n(o)){var r=this.create(o);(0,c.default)(!1,r),this.state.auto=r,r.attach()}}catch(t){(0,c.default)(!0,t)}}var e,o;return e=t,(o=[{key:"instances",get:function(){return function(t){if(Array.isArray(t))return r(t)}(t=this.state.instances)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t}}])&&a(e.prototype,o),t}();e.default=new l},406:(t,e)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e,r){if("object"===o(e))for(var n in e)e[n]=t(e[n],r);else if("string"==typeof e)for(var a in e=e.split(r))e[a]=e[a].trim();return e};e.default=function(){var t=document.getElementById("aff-js");if("object"===o(t)&&null!==t){var e=t.dataset.aff;if("string"==typeof e){var n=r(r(r(r(e,"!"),":"),","),"="),a=[];for(var s in n){var i={hosts:[],query:{}};for(var u in n[s][0])i.hosts.push(n[s][0][u][0]);for(var c in n[s][1])i.query[n[s][1][c][0]]=n[s][1][c][1];a.push(i)}return{tags:a}}}}},223:(t,e)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e="[Affiliate] ";if("object"===("undefined"==typeof console?"undefined":o(console))){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var s,i;t?(s=console).error.apply(s,[e].concat(n)):(i=console).log.apply(i,[e].concat(n))}}},7:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setNodeData=e.getNodeData=void 0;e.getNodeData=function(t){var e;return null!==(e=t._aff_data)&&void 0!==e?e:{}},e.setNodeData=function(t,e){var o,r,n;Object.assign(t,(n=e,(r="_aff_data")in(o={})?Object.defineProperty(o,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[r]=n,o))}},157:(t,e)=>{var o=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}e.stringify=function(t,e){e=e||"";var r,n,a=[];for(n in"string"!=typeof e&&(e="?"),t)if(o.call(t,n)){if((r=t[n])||null!=r&&!isNaN(r)||(r=""),n=encodeURIComponent(n),r=encodeURIComponent(r),null===n||null===r)continue;a.push(n+"="+r)}return a.length?e+a.join("&"):""},e.parse=function(t){for(var e,o=/([^=?&]+)=?([^&]*)/g,n={};e=o.exec(t);){var a=r(e[1]),s=r(e[2]);null===a||null===s||a in n||(n[a]=s)}return n}},96:t=>{t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},899:(t,e,o)=>{var r=o(96),n=o(157),a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,i=/^[a-zA-Z]:/,u=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(t){return(t||"").toString().replace(u,"")}var f=[["#","hash"],["?","query"],function(t,e){return h(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function p(t){var e,r=("undefined"!=typeof window?window:void 0!==o.g?o.g:"undefined"!=typeof self?self:{}).location||{},n={},s=typeof(t=t||r);if("blob:"===t.protocol)n=new d(unescape(t.pathname),{});else if("string"===s)for(e in n=new d(t,{}),l)delete n[e];else if("object"===s){for(e in t)e in l||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=a.test(t.href))}return n}function h(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function y(t,e){t=c(t),e=e||{};var o,r=s.exec(t),n=r[1]?r[1].toLowerCase():"",a=!!r[2],i=!!r[3],u=0;return a?i?(o=r[2]+r[3]+r[4],u=r[2].length+r[3].length):(o=r[2]+r[4],u=r[2].length):i?(o=r[3]+r[4],u=r[3].length):o=r[4],"file:"===n?u>=2&&(o=o.slice(2)):h(n)?o=r[4]:n?a&&(o=o.slice(2)):u>=2&&h(e.protocol)&&(o=r[4]),{protocol:n,slashes:a||h(n),slashesCount:u,rest:o}}function d(t,e,o){if(t=c(t),!(this instanceof d))return new d(t,e,o);var a,s,u,l,v,b,m=f.slice(),g=typeof e,w=this,j=0;for("object"!==g&&"string"!==g&&(o=e,e=null),o&&"function"!=typeof o&&(o=n.parse),a=!(s=y(t||"",e=p(e))).protocol&&!s.slashes,w.slashes=s.slashes||a&&e.slashes,w.protocol=s.protocol||e.protocol||"",t=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||i.test(t))||!s.slashes&&(s.protocol||s.slashesCount<2||!h(w.protocol)))&&(m[3]=[/(.*)/,"pathname"]);j<m.length;j++)"function"!=typeof(l=m[j])?(u=l[0],b=l[1],u!=u?w[b]=t:"string"==typeof u?~(v=t.indexOf(u))&&("number"==typeof l[2]?(w[b]=t.slice(0,v),t=t.slice(v+l[2])):(w[b]=t.slice(v),t=t.slice(0,v))):(v=u.exec(t))&&(w[b]=v[1],t=t.slice(0,v.index)),w[b]=w[b]||a&&l[3]&&e[b]||"",l[4]&&(w[b]=w[b].toLowerCase())):t=l(t,w);o&&(w.query=o(w.query)),a&&e.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==e.pathname)&&(w.pathname=function(t,e){if(""===t)return e;for(var o=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=o.length,n=o[r-1],a=!1,s=0;r--;)"."===o[r]?o.splice(r,1):".."===o[r]?(o.splice(r,1),s++):s&&(0===r&&(a=!0),o.splice(r,1),s--);return a&&o.unshift(""),"."!==n&&".."!==n||o.push(""),o.join("/")}(w.pathname,e.pathname)),"/"!==w.pathname.charAt(0)&&h(w.protocol)&&(w.pathname="/"+w.pathname),r(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(l=w.auth.split(":"),w.username=l[0]||"",w.password=l[1]||""),w.origin="file:"!==w.protocol&&h(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}d.prototype={set:function(t,e,o){var a=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(o||n.parse)(e)),a[t]=e;break;case"port":a[t]=e,r(e,a.protocol)?e&&(a.host=a.hostname+":"+e):(a.host=a.hostname,a[t]="");break;case"hostname":a[t]=e,a.port&&(e+=":"+a.port),a.host=e;break;case"host":a[t]=e,/:\d+$/.test(e)?(e=e.split(":"),a.port=e.pop(),a.hostname=e.join(":")):(a.hostname=e,a.port="");break;case"protocol":a.protocol=e.toLowerCase(),a.slashes=!o;break;case"pathname":case"hash":if(e){var s="pathname"===t?"/":"#";a[t]=e.charAt(0)!==s?s+e:e}else a[t]=e;break;default:a[t]=e}for(var i=0;i<f.length;i++){var u=f[i];u[4]&&(a[u[1]]=a[u[1]].toLowerCase())}return a.origin="file:"!==a.protocol&&h(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(t){t&&"function"==typeof t||(t=n.stringify);var e,o=this,r=o.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var a=r+(o.slashes||h(o.protocol)?"//":"");return o.username&&(a+=o.username,o.password&&(a+=":"+o.password),a+="@"),a+=o.host+o.pathname,(e="object"==typeof o.query?t(o.query):o.query)&&(a+="?"!==e.charAt(0)?"?"+e:e),o.hash&&(a+=o.hash),a}},d.extractProtocol=y,d.location=p,d.trimLeft=c,d.qs=n,t.exports=d}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,o),a.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var r=o(309);window.Affiliate=r.default})();
//# sourceMappingURL=affiliate.web.js.map